<div
        ngbDropdown
        class="d-inline-block w-100"
        placement="bottom-left top-left"
        #myDrop="ngbDropdown"
        (openChange)="done($event)"
>
    <button
            class="btn btn-secondary w-100 d-flex justify-content-between align-items-center date-picker-dd-toggle"
            id="datePickerDD"
            ngbDropdownToggle
            (click)="disabled ? myDrop.close() : (myDrop.isOpen() ? initCal() : null)"
    >
        <input type="hidden" class="wc-input" value="{{ date }}" />
        <div class="wc-date-container">
            <span *ngIf="date">{{ date | date: settings.format }}</span>
            <span *ngIf="!date">{{settings.format | uppercase}}</span>
        </div>
        <fa-icon icon="calendar-alt"></fa-icon>
    </button>
    <div ngbDropdownMenu aria-labelledby="datePickerDD" class="p-0">
        <div class="wc-date-popover" [ngClass]="{'wc-date-popover__date': !isDateTime}">
            <div class="wc-banner">
                <fa-icon class="cursor-pointer angle" icon="angle-left" (click)="prevMonth($event)"></fa-icon>
                <div class="wc-banner__detail">
                    {{ date | date: 'MMMM' }}, {{ date | date: 'yyyy' }}
                </div>
                <fa-icon icon="angle-right" class="cursor-pointer angle" (click)="nextMonth($event)"></fa-icon>
            </div>
            <div class="wc-content">
                <table class="calendar-header">
                    <tr>
                        <td class="calendar-header-day">M</td>
                        <td class="calendar-header-day">T</td>
                        <td class="calendar-header-day">W</td>
                        <td class="calendar-header-day">T</td>
                        <td class="calendar-header-day">F</td>
                        <td class="calendar-header-day">S</td>
                        <td class="calendar-header-day">S</td>
                    </tr>
                </table>

                <table class="calendar-days" (click)="setDay($event)">
                    <tr *ngFor="let week of monthDays">
                        <td
                                [ngClass]="{
                'calendar-day': day.day != null,
                today:
                  day.day == today.getDate() &&
                  day.date?.getMonth() == today.getMonth() &&
                  day.date?.getFullYear() == today.getFullYear(),
                'selected-day': day.day === date?.getDate() &&
                  day.date?.getMonth() === date?.getMonth(),
                'prev-month': day.date?.getMonth() != date?.getMonth()
              }"
                                *ngFor="let day of week"
                        >
                            <span [attr.data-label]="composeDate(day.date)">{{ day.day }}</span>
                        </td>
                    </tr>
                </table>
            </div>
            <div class="time-view" *ngIf="type === 'datetime'">
                <div class="time">
                    <div class="hour">
                        <div class="time__header">Hours</div>
                        <div class="time__manipulators">
                            <fa-icon icon="angle-left" class="inc-btn" (click)="decHour()"></fa-icon>
                            <input type="number" value="{{ hourValue }}" [(ngModel)]="hourValue" autofocus (input)="onHourChange()"/>
                            <fa-icon icon="angle-right" class="dec-btn" (click)="incHour()"></fa-icon>
                        </div>
                    </div>
                    <div class="minutes">
                        <div class="time__header">Minutes</div>
                        <div class="time__manipulators">
                            <fa-icon icon="angle-left" class="inc-btn" (click)="decMinutes()"></fa-icon>
                            <input type="number" value="{{ minuteValue }}" [(ngModel)]="minuteValue" (input)="onMinChange()" />
                            <fa-icon icon="angle-right" class="dec-btn" (click)="incMinutes()"></fa-icon>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

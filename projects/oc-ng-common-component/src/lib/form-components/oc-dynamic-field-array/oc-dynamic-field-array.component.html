<div class="oc-w-100 oc-d-flex oc-flex-column">
  <div *ngFor="let field of fieldsDataArray; let i = index" class="oc-mb-2" [class.hid-item]="getHiddenItemIndex(i)">
    <oc-dynamic-array-item
            [subFields]="fieldDefinition?.subFieldDefinitions"
            [index]="i"
            [fieldLabelId]="fieldDefinition?.attributes.rowLabel ? fieldDefinition?.attributes.rowLabel : ''"
            [formFieldsData]="fieldsDataArray[i]"
            (sendFieldData)="editDFAItemData($event, i)"
            (deleteField)="deleteDynamicItem($event, i)"></oc-dynamic-array-item>
  </div>
  <div *ngFor="let form of formsArray; let j = index" class="form-card oc-mb-3">
    <div class="form-card-header oc-pt-3 oc-px-5 oc-pb-2">
      <h3 class="oc-mb-0">
        {{!form.new && fieldDefinition?.attributes.rowLabel ?
          getLabelValue(fieldsDataArray[form.index], fieldDefinition?.attributes.rowLabel)
          : 'Item ' + (form.index + 1)}}
      </h3>
      <svg-icon src="assets/oc-ng-common-component/trash-icon.svg" svgClass="icon-size"
                (click)="deleteDynamicItem(form.new, j)"></svg-icon>
    </div>
    <div class="form-card-body oc-pt-3 oc-px-5 oc-pb-4">
      <oc-form [formJsonData]="form"
               [showButton]="false"
               (formDataUpdated)="onFieldDataUpdates($event, form)"
               successButtonText="Save"></oc-form>
    </div>
    <div class="form-card-buttons oc-px-5 oc-pb-5">
      <oc-button type="secondary" text="Cancel" (click)="cancelArrayItemAdding(j)"></oc-button>
      <oc-button type="primary" text="Save" (click)="saveItemFieldsData(form, j)"></oc-button>
    </div>
  </div>
  <oc-button type="primary" text="Add" (click)="addNewArrayItem()"></oc-button>
</div>

<div class="cards-interface">
  <div class="cards-interface__added-item"
       *ngFor="let formItem of dfaFormArray.controls; let i = index; trackBy: trackByFieldIndex">
    <oc-dynamic-array-item
            *ngIf="!formsArrayConfig[i].isEdit"
            [dfaForm]="formItem"
            [subFields]="fieldDefinition?.fields"
            [formFieldsData]="formItem.value"
            [fieldLabelId]="fieldDefinition.attributes.rowLabel || ''"
            [index]="i"
            (sendFieldData)="editDFAItemData($event, i)"
            (deleteField)="deleteDynamicItem($event, i)"></oc-dynamic-array-item>
    <div class="cards-interface__preview" *ngIf="formsArrayConfig[i].isEdit">
      <div class="cards-interface__preview-header">
        <h3 class="cards-interface__preview-header-text">{{!formsArrayConfig[i].new && fieldDefinition.attributes.rowLabel ?
            getLabelValue(formItem.value, fieldDefinition?.attributes.rowLabel)
            : 'Item ' + (i + 1)}}
        </h3>
        <svg-icon class="cards-interface__preview-icon"
                  src="assets/oc-ng-common-component/trash-icon.svg"
                  (click)="deleteDynamicItem(formsArrayConfig[i].new, i)"></svg-icon>
      </div>
      <div class="cards-interface__preview-content">
        <oc-form [formJsonData]="fieldDefinition"
                 [generatedForm]="formItem"
                 [showButton]="false"></oc-form>
      </div>
      <div class="cards-interface__preview-buttons">
        <oc-button class="cards-interface__preview-buttons-cancel"
                   type="secondary" text="Cancel"
                   (click)="cancelArrayItemAdding(i, formsArrayConfig[i].new, formItem)"></oc-button>
        <oc-button class="cards-interface__preview-buttons-save"
                   type="primary" text="Save"
                   (click)="saveItemFieldsData(formsArrayConfig[i], formItem)"></oc-button>
      </div>
    </div>
  </div>
  <oc-button class="cards-interface__add-btn" type="primary" text="Add" (click)="addNewArrayItem()"></oc-button>
</div>
